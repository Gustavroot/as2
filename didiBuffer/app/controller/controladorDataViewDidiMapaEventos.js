/*
 * File: app/controller/controladorDataViewDidiMapaEventos.js
 *
 * This file was generated by Sencha Architect version 2.1.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Sencha Touch 2.1.x library, under independent license.
 * License of Sencha Architect does not include license for Sencha Touch 2.1.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('MyApp.controller.controladorDataViewDidiMapaEventos', {
    extend: 'Ext.app.Controller',

    config: {
        refs: {
            dataview: '#dataViewDidiMapaEventos'
        },

        control: {
            "dataview": {
                itemtap: 'onDataviewItemTap'
            }
        }
    },

    onDataviewItemTap: function(dataview, index, target, record, e, options) {
        Ext.getCmp("mapaCercaniaEventos").setMasked({xtype: 'loadmask', message: 'Espere por favor...'});

        //alert(record.get("idEventoCategorias"));

        //Se pasa por parametro la categoria de la cual se desea extraer el listado de las
        //empresas
        Ext.getStore("storeSubEventosMapa").getProxy().setExtraParam('categoriaEventoParam',record.get("idEventoCategorias"));

        //alert("afasd;");


        //Se introducen markers en el mapa, para esto, se pasa el store del cual se extraeran
        //los campos correspondientes, y se pasa el mapa al cual se le agregaran esos markers
        funcionParaIntroducirMarkersEnMapa("storeSubEventosMapa",Ext.getCmp("mapaCercaniaEventos"));


    }

});