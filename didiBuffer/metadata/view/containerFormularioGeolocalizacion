{
    "type": "container",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "containerFormularioGeolocalizacion",
        "designer|userAlias": "containerformulariogeolocalizacion",
        "html": null,
        "id": "containerFormularioGeolocalizacion",
        "itemId": "containerFormularioGeolocalizacion",
        "layout": "fit"
    },
    "id": "ExtBox1-ext-gen52367",
    "designerId": "6ea0b62f-6c24-479a-9bda-be1e2bb377a8",
    "cn": [
        {
            "type": "toolbar",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "MyToolbar",
                "docked": "top",
                "height": "10%",
                "id": "toolbarContainerGeolocalizacion",
                "style": "background: #3E3737"
            },
            "designerId": "5ea1f237-e1c8-48f0-a299-034fa5df4019",
            "cn": [
                {
                    "type": "image",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|userClassName": "MyImage5",
                        "centered": true,
                        "height": "100%%",
                        "html": "<img src=\"./resources/logo/Logo_DD.png\" width=\"100%\" height=\"100%\">",
                        "id": "imagenToolbarContainerGeolocalizacion",
                        "itemId": "myimage18",
                        "width": "40%"
                    },
                    "designerId": "6a4f2d2c-3143-40e6-beda-97c42e461726",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|userClassName": "onImagenToolbarContainerGeolocalizacionTap",
                                "fn": "onImagenToolbarContainerGeolocalizacionTap",
                                "implHandler": [
                                    "//Todo logo de Didi redirige hacia containerInicio",
                                    "Ext.getCmp(\"tabPanelPrincipal\").setActiveItem(Ext.getCmp(\"containerInicio\"));"
                                ],
                                "name": "tap"
                            },
                            "designerId": "ac24dfcd-1136-4b5a-97f1-0651a2ae03b1"
                        }
                    ]
                },
                {
                    "type": "button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|userClassName": "MyButton1",
                        "baseCls": "botonAtras",
                        "height": "80%",
                        "id": "botonAtrasContainerGeolocalizacion",
                        "left": null,
                        "right": "2%",
                        "top": "10%",
                        "ui": "action-round",
                        "width": "15%",
                        "text": null
                    },
                    "designerId": "52f2d16d-e557-42bd-996e-bdbe8c75e83c",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|userClassName": "handler",
                                "fn": "handler",
                                "designer|params": [
                                    "button",
                                    "event"
                                ],
                                "implHandler": [
                                    "//Se devuleve hacia containerInicio, ya que se esta en busqueda",
                                    "Ext.getCmp(\"tabPanelPrincipal\").setActiveItem(Ext.getCmp(\"containerInicio\"));"
                                ]
                            },
                            "designerId": "f3c30195-6636-48c0-9220-4f49ba9894df"
                        }
                    ]
                }
            ]
        },
        {
            "type": "fieldset",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "MyFieldSet",
                "height": "25%",
                "id": "fieldSetBusquedaPorGeolocalizacion",
                "style": "background-color: white",
                "top": "15%",
                "width": "100%",
                "title": null
            },
            "designerId": "8a6e7f3d-3fc8-426f-af88-72b00b93a6e5",
            "cn": [
                {
                    "type": "textfield",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|userClassName": "MyTextField",
                        "height": "50%",
                        "id": "textFieldBusquedaPorGeolocalizacion1",
                        "top": null,
                        "width": "100%",
                        "label": "<center> Búsqueda </center>",
                        "labelWidth": "100%"
                    },
                    "designerId": "8a4723de-be66-44e6-98d8-568d13817cd5"
                },
                {
                    "type": "textfield",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|userClassName": "MyTextField1",
                        "height": "50%",
                        "id": "textFieldBusquedaPorGeolocalizacion2",
                        "top": null,
                        "width": "100%",
                        "label": null,
                        "placeHolder": "Digite aquí su búsqueda"
                    },
                    "designerId": "5ca4cd17-a17a-4d8c-9af7-2f6fda743c61"
                }
            ]
        },
        {
            "type": "button",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "MyButton65",
                "height": "20%",
                "id": "botonBusquedaPorGeolocalizacionListadoEmpresas",
                "left": "10%",
                "top": "75%",
                "width": "32%",
                "text": "Listado"
            },
            "designerId": "50bc45c4-68fd-4d78-b217-25283487e7c5",
            "cn": [
                {
                    "type": "fixedfunction",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|userClassName": "handler",
                        "fn": "handler",
                        "designer|params": [
                            "button",
                            "event"
                        ],
                        "implHandler": [
                            "//Se quiere hacer una busqueda por geolocalizacion... pero se quiere utilizar la",
                            "//misma lista de listadoTotal Empresas... pero para esto, hay que comenzar por",
                            "//cambiar el Url del proxy que le corresponde al store que le corresponde:",
                            "Ext.getStore(\"storeListaEmpresasEnSubcategoria\").getProxy().setUrl(\"http://www.didicr.com/php/busqueda/geolocalizacion/busquedaGeolocalizacionListado.php\");",
                            "",
                            "",
                            "if (navigator.geolocation) {",
                            "    navigator.geolocation.getCurrentPosition(",
                            "    function(position){",
                            "        //Se crea un objeto de posicion, con latitud y longitud actuales",
                            "        posActual = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);",
                            "        //Ext.getCmp(\"mapaContainerMapa\").setMapCenter({latitude: posActual.lat(), longitude: posActual.lng()});",
                            "    }",
                            "    );",
                            "}",
                            "",
                            "",
                            "//alert(posActual.lat());",
                            "//alert(posActual.lng());",
                            "",
                            "latMinimaFormulatioGeolocalizacion=posActual.lat()-(Ext.getCmp(\"sliderFieldKmFormularioGeoilocalizacion\").getValue())/100;",
                            "latMaximaFormulatioGeolocalizacion=posActual.lat()+(Ext.getCmp(\"sliderFieldKmFormularioGeoilocalizacion\").getValue())/100;",
                            "lngMinimaFormulatioGeolocalizacion=posActual.lng()-(Ext.getCmp(\"sliderFieldKmFormularioGeoilocalizacion\").getValue())/100;",
                            "lngMaximaFormulatioGeolocalizacion=posActual.lng()+(Ext.getCmp(\"sliderFieldKmFormularioGeoilocalizacion\").getValue())/100;",
                            "",
                            "",
                            "Ext.getStore(\"storeListaEmpresasEnSubcategoria\").loadPage(1);",
                            "",
                            "",
                            "Ext.getStore(\"storeListaEmpresasEnSubcategoria\").getProxy().setExtraParam('latitudMinimaParam',latMinimaFormulatioGeolocalizacion);",
                            "Ext.getStore(\"storeListaEmpresasEnSubcategoria\").getProxy().setExtraParam('latitudMaximaParam',latMaximaFormulatioGeolocalizacion);",
                            "Ext.getStore(\"storeListaEmpresasEnSubcategoria\").getProxy().setExtraParam('longitudMinimaParam',lngMinimaFormulatioGeolocalizacion);",
                            "Ext.getStore(\"storeListaEmpresasEnSubcategoria\").getProxy().setExtraParam('longitudMaximaParam',lngMaximaFormulatioGeolocalizacion);",
                            "",
                            "",
                            "",
                            "//Luego, hay que pasar por extraparam la palabra que se escribio en el campo",
                            "//proporcionado al usuario",
                            "Ext.getStore(\"storeListaEmpresasEnSubcategoria\").getProxy().setExtraParam('palabraBusquedaListadoParam',Ext.getCmp(\"textFieldBusquedaPorGeolocalizacion2\").getValue());",
                            "viewDelQuePasoHaciaListadoTotalEmpresas=\"containerFormularioGeolocalizacion\";",
                            "Ext.getStore(\"storeListaEmpresasEnSubcategoria\").load();"
                        ]
                    },
                    "designerId": "4a3bf135-9c0d-4461-84af-b0b2573e49d0"
                }
            ]
        },
        {
            "type": "button",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "MyButton66",
                "height": "20%",
                "id": "botonBusquedaPorGeolocalizacionMapa",
                "left": null,
                "right": "10%",
                "top": "75%",
                "width": "32%",
                "text": "Mapa"
            },
            "designerId": "88147436-e50c-4270-bf90-925ad07dc8a5",
            "cn": [
                {
                    "type": "fixedfunction",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|userClassName": "handler",
                        "fn": "handler",
                        "designer|params": [
                            "button",
                            "event"
                        ],
                        "implHandler": [
                            "//Se pasa hacia el container de mapa, luego se borran los markers ahi, despues",
                            "//se oculta el dataView con las categorias de Empresas, ",
                            "Ext.getCmp(\"tabPanelPrincipal\").setActiveItem(Ext.getCmp(\"containerMapaPrincipal\"));",
                            "while(markersMapaPrincipal[0]){",
                            "    markersMapaPrincipal.pop().setMap(null);",
                            "}",
                            "Ext.getCmp(\"dataViewDidiMapaPrincipalEnTabPanel\").setHidden(1);",
                            "//Se quiere hacer una busqueda por geolocalizacion... pero se quiere utilizar la",
                            "//misma lista de listadoTotal Empresas... pero para esto, hay que comenzar por",
                            "//cambiar el Url del proxy que le corresponde al store que le corresponde:",
                            "Ext.getStore(\"storeListadoTotalDeLasEmpresas\").getProxy().setUrl(\"http://www.didicr.com/php/busqueda/geolocalizacion/busquedaGeolocalizacionMapa.php\");",
                            "//Luego, hay que pasar por extraparam la palabra que se escribio en el campo",
                            "//proporcionado al usuario",
                            "",
                            "if (navigator.geolocation) {",
                            "    navigator.geolocation.getCurrentPosition(",
                            "    function(position){",
                            "        //Se crea un objeto de posicion, con latitud y longitud actuales",
                            "        posActual = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);",
                            "        //Ext.getCmp(\"mapaContainerMapa\").setMapCenter({latitude: posActual.lat(), longitude: posActual.lng()});",
                            "    }",
                            "    );",
                            "}",
                            "",
                            "",
                            "//alert(posActual.lat());",
                            "//alert(posActual.lng());",
                            "",
                            "latMinimaFormulatioGeolocalizacion=posActual.lat()-(Ext.getCmp(\"sliderFieldKmFormularioGeoilocalizacion\").getValue())/100;",
                            "latMaximaFormulatioGeolocalizacion=posActual.lat()+(Ext.getCmp(\"sliderFieldKmFormularioGeoilocalizacion\").getValue())/100;",
                            "lngMinimaFormulatioGeolocalizacion=posActual.lng()-(Ext.getCmp(\"sliderFieldKmFormularioGeoilocalizacion\").getValue())/100;",
                            "lngMaximaFormulatioGeolocalizacion=posActual.lng()+(Ext.getCmp(\"sliderFieldKmFormularioGeoilocalizacion\").getValue())/100;",
                            "",
                            "",
                            "//Ext.getStore(\"storeListadoTotalDeLasEmpresas\").loadPage(1);",
                            "",
                            "",
                            "Ext.getStore(\"storeListadoTotalDeLasEmpresas\").getProxy().setExtraParam('latitudMinimaParam',latMinimaFormulatioGeolocalizacion);",
                            "Ext.getStore(\"storeListadoTotalDeLasEmpresas\").getProxy().setExtraParam('latitudMaximaParam',latMaximaFormulatioGeolocalizacion);",
                            "Ext.getStore(\"storeListadoTotalDeLasEmpresas\").getProxy().setExtraParam('longitudMinimaParam',lngMinimaFormulatioGeolocalizacion);",
                            "Ext.getStore(\"storeListadoTotalDeLasEmpresas\").getProxy().setExtraParam('longitudMaximaParam',lngMaximaFormulatioGeolocalizacion);",
                            "",
                            "",
                            "Ext.getStore(\"storeListadoTotalDeLasEmpresas\").getProxy().setExtraParam('palabraBusquedaListadoParam',Ext.getCmp(\"textFieldBusquedaPorGeolocalizacion2\").getValue());",
                            "funcionParaIntroducirMarkersEnMapa(\"storeListadoTotalDeLasEmpresas\",Ext.getCmp(\"mapaContainerMapa\"));",
                            "//Se ajusta el mapOptions por si el usuario lo modifico",
                            "//Ext.getCmp(\"mapaContainerMapa\").setMapOptions({zoom: 14});"
                        ]
                    },
                    "designerId": "43231c78-464d-4188-b2a1-4e00a29cb40a"
                }
            ]
        },
        {
            "type": "container",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "MyContainer58",
                "height": "5%",
                "html": "<b><center> Ver resultados por: </center></b>",
                "id": "containerTituloBotonesBusquedaGeolocalizacion",
                "top": "65%",
                "width": "100%"
            },
            "designerId": "c0a4d258-948a-4f32-bfa7-734fe517e357"
        },
        {
            "type": "container",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "MyContainer59",
                "height": "10%",
                "html": "<b><center> Búsqueda por lugar </center></b>",
                "id": "containerTituloBusquedaPorGeolocalizacion",
                "top": "2%",
                "width": "100%"
            },
            "designerId": "96bd1d05-9101-4a2a-aed8-a643d87e11b7"
        },
        {
            "type": "sliderfield",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "MySliderField",
                "baseCls": "sliderLugar",
                "id": "sliderFieldKmFormularioGeoilocalizacion",
                "itemId": "mysliderfield",
                "top": "42%",
                "width": "100%",
                "label": null,
                "value": [
                    0
                ],
                "increment": 0.1,
                "maxValue": 25
            },
            "designerId": "35d56424-82b7-4052-bad9-9938dcccea15",
            "cn": [
                {
                    "type": "basiceventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|userClassName": "onSliderFieldKmFormularioGeoilocalizacionChange",
                        "fn": "onSliderFieldKmFormularioGeoilocalizacionChange",
                        "implHandler": [
                            "//alert();",
                            "//alert(\"<center> <p> \"+Ext.getCmp(\"sliderFieldKmFormularioGeoilocalizacion\").getValue().slice(0,5)+\" km </p> </center>\");",
                            "stringParaKmFormularioGeolocalizacion=\" \"+Ext.getCmp(\"sliderFieldKmFormularioGeoilocalizacion\").getValue();",
                            "",
                            "Ext.getCmp(\"containerKmFormularioGeolocalizacion\").setHtml(\"<center> <p>\"+stringParaKmFormularioGeolocalizacion.slice(0,5)+\" km </p> </center>\");",
                            "",
                            "//",
                            "",
                            "//alert(Ext.getCmp(\"sliderFieldKmFormularioGeoilocalizacion\").getValue());",
                            "",
                            ""
                        ],
                        "name": "change"
                    },
                    "designerId": "e1dd92e0-8484-4872-ad52-2636795068f9"
                }
            ]
        },
        {
            "type": "container",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "MyContainer84",
                "height": "7%",
                "html": "<center> <p> 0 km </p> </center>",
                "id": "containerKmFormularioGeolocalizacion",
                "left": "40%",
                "top": "56%",
                "width": "20%"
            },
            "designerId": "69c8f660-f89d-453d-b477-a8b88a9f2303"
        }
    ]
}